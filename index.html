<title>nemui</title>
<script>
  document.write ('<' + 'link rel=stylesheet href=hoge>');
</script>
<p data-msgid=test>Mecha nemui.

<p data-msgid=test2>
  
  <p data-msgid=hello!>
    
    <p data-msgid=test>試験</p>

<pre></pre>

<script>
  var output = document.querySelector ('pre');
  onmessage = function (ev) {
    output.textContent += "\n" + JSON.stringify ({data: ev.data, origin: ev.origin});
    
    var text = ev.data.text;
    if (text.msgid) {
      var id = text.msgid.replace (/["\\\u000D\u000A\u000C]/g, function (x) { return "\\" + x.charCodeAt (0).toString (16) + " " });
      Array.prototype.forEach.call (document.querySelectorAll ('[data-msgid="' + id + '"]'), function (el) {
        el.textContent = text.langs[ev.data.lang].body_0;
      });
    }
  };
</script>

<p>あいうえお
